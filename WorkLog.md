# 紅樓夢問答系統開發日誌

## 2025年4月6日

### 與兆基學長討論

今天詢問兆基學長，我問道：「兆基，我還可以詢問你三國問答系統是基於微軟的GraphRAG實作的嗎？思考功能又是如何嵌入的呢？是利用Agent RAG架構實現的嗎？我記得上次面談時，你有說到三國系統沒有用到Agent RAG。因為紅樓夢問答項目我想計畫先做成三國系統的結果，但網上還沒查到相關GraphRAG搭配 Agent RAG的範例。」

該位學長回覆了：「它不是用微軟的graphRAG，也引導先從需求方面想問題，再想要用哪些工具，不要一開始就想架構，把項目框住了。

我進而說明了：「兆基學長，我正在依照你們的建議，規劃紅樓夢問答系統的項目，想練習從文本中抽取出結構化的數據，轉成智能表格。

除了實現人物關系問答外，我也希望系統能支持綜合問答，並在回複時附上相關段落的來源參考。

目前我想到一個比較合適的技術組合是 GraphRAG 配合智能體（Agent)，讓智能體來思考判斷需要檢索哪些內容，再由 GraphRAG 提供結構化的知識支持。

只是我現在卡在技術點上：不太清楚如何把 GraphRAG 和智能體結合起來。學長有沒有什麽建議，或者可以分享一些相關的思路或經驗嗎？」


兆基學長回答道：GraphRAG和Agentic RAG更像是一種理念，我把它們看得太割裂了。因為它們要發論文的關係，所以會各自把兩種概念系統化，造成一個workflow，所以看起來是兩個不一樣的系統，但實際上它們只是一種理念，是可以相互使用搭配的。你看GraphRAG每個公司做的方法都不一樣，但本質都是一樣就是要從圖數據去檢索資料。所以要把它們看成工具，而不是不可融合的整體。簡單來說，GraphRAG 本身不負責思考，它負責提供結構化的「線索」；真正的「思考」（推理、總結）是 LLM 的工作。兩者搭配起來就像是「圖書館員（GraphRAG）找書 + 作家（LLM）寫文章」的合作模式。」

學長建議我可以先從RAG、GraphRAG、Agentic RAG的實作開始做起，可以使用別人的成果進行實作，這樣會更有對於技術本身的應用更有體會，而不只是單止於知識面。因此，我規劃先試試看RAG、GraphRAG、Agentic RAG 各用紅樓夢測試文本(前三回)試驗其效果。

### RAG實驗進度

- 綜整今天的進度：
  - 已完成基本RAG系統的搭建
  - 使用Streamlit UI 搭建測試程序
  - 已實現文檔上傳、處理和檢索的基本功能
  - 已添加查詢擴展功能以提高檢索效果
  - 已實現多種文件格式的支持（PDF、DOCX、TXT、HTML）

- 遇到的問題：
  - 中文文本處理問題：縱使選擇了Chinese的text-embedding模型，仍然遇到檢索出來的文件顯示為`[UNK] [UNK] [UNK]`的問題
  - 可能的解決方案：嘗試使用OpenAI的text-embedding模型，這可能會提供更好的中文支持

### 下一步計劃

- 解決中文文本處理問題
- 實現GraphRAG系統
- 實現Agentic RAG系統
- 比較三種系統在紅樓夢文本上的效果
